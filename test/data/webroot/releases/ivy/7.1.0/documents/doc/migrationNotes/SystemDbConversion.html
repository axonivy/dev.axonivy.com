<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title>System Database Conversion</title>
  <link rel="shortcut icon" href="../shared/images/ivy_favicon_48.png" />
	<link href="../shared/css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="../shared/css/docs.min.css" rel="stylesheet" type="text/css">
  <link href="../shared/css/ivy-common-6.css" rel="stylesheet" type="text/css">
	<link href="../shared/css/ivy-designer-doc.css" rel="stylesheet" type="text/css">
  <script src="../shared/js/jquery.min.js"></script>
  <script src="../shared/js/bootstrap.min.js"></script>
  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>
<div id="mainContent">

    <!-- start-top-navigation -->
		<div class="navbar navbar-top" role="navigation">
		  <div class="container" id="headerdiv">
			<div class="navbar-header">
			  <a class="ivy-logo" href="http://developer.axonivy.com">
                <img src="../shared/images/axon_ivy_logo.png" alt="Axon.ivy" />
              </a>
			</div>
			
			<div class="navbar">
			  <ul class="nav nav-pills" id="navbar-ivy-links">
				<li><a href="http://developer.axonivy.com/download/" target="blank"><span class="glyphicon glyphicon-download" aria-hidden="true"></span><br>Download</a></li>
				<li><a href="http://developer.axonivy.com/doc/" target="blank"><span class="glyphicon glyphicon-book" aria-hidden="true"></span><br>Documentation</a></li>
				<li><a href="http://answers.axonivy.com" target="blank"><span class="glyphicon glyphicon-user" aria-hidden="true"></span><br>Q &amp; A</a></li>
				<li><a href="http://www.ivyteam.ch/flatpress/?paged=1" target="blank"><span class="glyphicon glyphicon-new-window" aria-hidden="true"></span><br>Blog</a></li>
			  </ul>
			</div>

		  </div><!-- /.container -->
		</div>
    <div class="navbar ivy-subnav">
      <div class="navbar-inner">
        <div class="container">
          <div class="row">
            <ul class="nav nav-pills">
              <li><a href="../newAndNoteworthy/NewAndNoteworthyDesigner.html">N&amp;N Designer</a></li>
              <li><a href="../newAndNoteworthy/NewAndNoteworthyEngine.html">N&amp;N Engine</a></li>
              <li><a href="../../ReleaseNotes.txt">Realease Notes</a></li>
              <li class="active"><a href="../../MigrationNotes.html">Migration Notes</a></li>
              <li><a href="../../ReadMe.html">Read Me</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    
    <!-- end-top-navigation -->
	
	<div class="container">
	<h1 class="page-header">Converting the Engine System Database</h1>
	<div class="bs-callout bs-callout-warning">
			<h4>System Database Backup</h4>
			<p>It is highly recommended that you back up your system database before the conversion.</p>
		</div>
		<h2>Engine Configuration Tool</h2>
		<h3>Step 1</h3>
        Start the <b>Engine Configuration</b>
        tool (AxonIvyEngineConfig) of the <span style="text-decoration: underline;">new</span>
        Axon.ivy Engine in the browser and switch to the <b>System Database</b> tab.<br>
        A message will be shown that the current database is outdated:<br>
        <br>
        <img alt="" title="Engine configuration old database" src="images/systemdbconvert_before.png">
		
		<h3>Step 2</h3>
        To automatically convert your old system database click the <b>Convert Database</b> button. A dialog appears asking for confirmation:<br>
        <br>
        <img alt="" title="Really?" src="images/systemdbconvert_question.png"><br>
        <img alt="" title="Success" src="images/systemdbconvert_success.png"><br>
        Confirm the dialog and the system database will be converted
        automatically. The next attempt to connect to the now converted
        database will succeed.
        
		<h2>Auto Convert Property</h2>
		<p>
			Instead of using the Engine Configuration Tool to convert the system database you can also set the <i>autoConvert</i> property to <i>true</i> in the <i>serverconfig.xml</i>
			in the <i>configuration</i> directory. Then the system database will be converted automatically on the next engine start.
		</p>

		<h2>Notes</h2>
		
		<div class="bs-callout bs-callout-warning">
			<h4>Stop other connections to the system database!</h4>
			<p><span style="color: Black">Depending on the conversion steps and
        your database system it may be necessary to cut all connections to the
        system database to avoid problems. If you have problems with the
        conversion, please disconnect all other database management tools,
        clients or other tools that has a connection to the system database and
        try again. </span></p>
		</div>

		<div class="bs-callout bs-callout-warning">
			<h4>IBM Db2 System i (AS400, iSeries)</h4>
			 <p><span style="color: Black">Before converting a system database
				located on a Db2 IBM System i the following command must be execute on
				a green screen on the system to prevent the conversion to fail with a
				SQL0952 error:</span></p>

				<p><code><span style="color:#000000">ADDRPYLE SEQNBR(9999)
				MSGID(CPA32B2) RPY(I)</span></code></p>

				<p><span style="color:#000000">This will add an I (Ignore) auto reply
				for the message CPA32B2. This is a global setting affecting the whole
				IBM System i. Therefore, the added auto reply should be removed once
				the system database is successfully converted using the following
				command:</span></p>

			 <p><code><span style="color:#000000">RMVRPYLE SEQNBR(9999)</span></code></p>
			 
		</div>

        </div>
	</div>
<br/><br/><br/>
</body>
</html>
