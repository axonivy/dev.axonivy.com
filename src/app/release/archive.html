{% extends "templates/parts/base_content.html" %}

{% block title %}Archive{{ parent() }}{% endblock %}

{% block content %}

	<style>
	table.alt tbody tr td {
    	border-color: #C7D426;
	}
	table.alt tbody tr td {
    	border: 0px;
    	border-top: 1px solid black;
	}
	</style>

    <section id="main" >
		<div class="inner">
			<header><h2>Archive</h2></header>
			<div class="table-wrapper">
				<div class="select-wrapper">
					<select name="version" id="version" onchange="location = this.value;">
						{% for versionLink in versionLinks %}
							<a href="#"><option value="{{ versionLink.url }}" {{ (versionLink.id == currentMajorVersion) ? 'selected' : '' }}>{{ versionLink.displayText }}</option></a>
						{% endfor %}
					</select>
				</div>
				
				<br />
				
				<table class="alt">
					<thead>
						<tr>
							<th>Version</th>
							<th>Download</th>
							<th>Documents</th>
						</tr>
					</thead>
					<tbody>
						{% for releaseInfo in releaseInfos %}
							<tr>
								<td>{{ releaseInfo.version.VersionNumber }}</td>
								<td>
									{% if releaseInfo.UnsafeVersion %}
										<span style="color:red;">
										 We have identified a security issue in this version which has been fixed with {{ releaseInfo.SafeVersion }}.
										 We highly recommend updating to the latest version or <a href="/download/securityvulnerability">patch this version!</a>
										 </span> <br />
									{% endif %}
								
									{% for variant in releaseInfo.Variants %}
										<a href="{{ variant.DownloadUrl }}"><span class="icon fas fa-download"> </span></a>&nbsp;{{ variant.FileName }}<br />
									{% endfor %}
								</td>
								<td style="min-width:200px;">
									{% if releaseInfo.DocProvider.hasDocuments %}
										<a href="{{ releaseInfo.DocProvider.OverviewUrl }}"><span class="icon fas fa-file"> </span></a>&nbsp;Documentation<br />
									{% endif %}
									{% if releaseInfo.hasHotfix %}
										<a href="{{ releaseInfo.HotfixFileUrl }}"><span class="icon fas fa-download"> </span></a>&nbsp;Hotfix<br />
										<a href="{{ releaseInfo.DocProvider.HotfixHowToDocument.Url }}"><span class="icon fas fa-file"> </span></a>&nbsp;{{ releaseInfo.DocProvider.HotfixHowToDocument.Name }}<br />
									{% endif %}
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</section>
    
{% endblock %}